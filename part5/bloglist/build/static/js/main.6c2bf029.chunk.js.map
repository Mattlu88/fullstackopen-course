{"version":3,"sources":["components/LoginForm.js","components/Blog.js","components/BlogForm.js","components/NewBlog.js","components/Notification.js","services/token.js","hooks/index.js","services/login.js","App.js","index.js"],"names":["LoginForm","props","username","password","handleLogin","console","log","onSubmit","htmlFor","id","name","required","autoFocus","Blog","initBlog","blog","blogService","currUser","setMessage","useState","showBlogDetail","setShowBlogDetail","setBlog","className","onClick","title","author","url","likes","a","async","updatedBlog","update","type","text","user","window","confirm","remove","response","data","error","BlogForm","newBlog","handleCreateNewBlog","input","NewBlog","showBlogForm","handleOnClick","children","Notification","message","length","concat","token","newToken","useField","value","setValue","onChange","event","target","reset","init","axios","post","then","BlogList","blogs","sort","b","map","key","LoggedInfo","loggedUser","handleLogout","App","baseUrl","list","setList","getAll","get","headers","create","newObject","put","filter","e","delete","useResource","setUser","setShowBlogForm","initMessage","this","useEffect","checkToken","loggedUserJSON","localStorage","getItem","parsedUser","JSON","parse","removeItem","preventDefault","savingBlog","loginService","loginUser","setItem","stringify","catch","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6c2bf029.chunk.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst LoginForm = (props) => {\r\n  const {\r\n    username,\r\n    password,\r\n    handleLogin\r\n  } = props\r\n\r\n  console.log('rending loginform')\r\n  return (\r\n    <div>\r\n      <form onSubmit={handleLogin}>\r\n        <div>\r\n          <label htmlFor=\"username\">username: </label>\r\n          <input\r\n            id=\"username\"\r\n            name=\"username\"  \r\n            {...username}\r\n            required autoFocus></input>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"password\">password: </label>\r\n          <input\r\n            id=\"password\"\r\n            name=\"password\"\r\n            {...password}\r\n            required></input>\r\n        </div>\r\n        <button>login</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nLoginForm.propTypes = {\r\n  username: PropTypes.object.isRequired,\r\n  password: PropTypes.object.isRequired,\r\n  handleLogin: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default LoginForm","import React, { useState } from 'react'\r\nimport '../css/Blog.css'\r\n//import blogService from '../services/blogs'\r\n\r\nconst Blog = (props) => {\r\n  const initBlog = props.blog\r\n  const blogService = props.blogService\r\n  const currUser = props.currUser\r\n  const setMessage = props.setMessage\r\n  const [showBlogDetail, setShowBlogDetail] = useState(false)\r\n  const [blog, setBlog] = useState(initBlog)\r\n\r\n  const handleOnClick = () => {\r\n    setShowBlogDetail(!showBlogDetail)\r\n  }\r\n\r\n  const updateBlogLikes = async () => {\r\n    try {\r\n      const updatedBlog = { ...blog, likes: blog.likes + 1 }\r\n      setBlog(updatedBlog)\r\n      await blogService.update(blog.id, updatedBlog)\r\n    } catch (error) {\r\n      setBlog(initBlog)\r\n      setMessage({ type: 'error', text: 'Failed to add likes' })\r\n    }\r\n  }\r\n\r\n  const handleRemoveBlog = async () => {\r\n    if (window.confirm(`remove blog ${blog.title} by ${blog.author}`)) {\r\n      try {\r\n        await blogService.remove(blog.id)\r\n        setMessage({ type: 'info', text: `${blog.title} has been deleted` })\r\n      } catch (error) {\r\n        setMessage({ type: 'error', text: error.response.data.error })\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"blogContainer\">\r\n      <div className=\"blogHeader\" onClick={handleOnClick}>\r\n        {blog.title} {blog.author}\r\n      </div>\r\n      { showBlogDetail &&\r\n        <div>\r\n          <p>\r\n            {blog.url}\r\n          </p>\r\n          <p>\r\n            {blog.likes} likes\r\n            <button onClick={updateBlogLikes}>like</button>\r\n          </p>\r\n          <p>\r\n            added by {blog.user.username}\r\n          </p>\r\n          {(currUser.id === blog.user.id) &&\r\n            <button onClick={handleRemoveBlog}>remove</button>\r\n          }\r\n        </div>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Blog","import React from 'react'\r\n\r\nconst BlogForm = ({ newBlog, handleCreateNewBlog }) => {\r\n  return (\r\n    <div>\r\n      <h2>Create new blog</h2>\r\n      <form onSubmit={handleCreateNewBlog}>\r\n        <div>\r\n          <label htmlFor=\"title\">title:</label>\r\n          <input\r\n            id=\"title\"\r\n            name=\"title\"\r\n            {...newBlog.title.input}\r\n          >\r\n          </input>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"author\">author:</label>\r\n          <input\r\n            id=\"author\"\r\n            name=\"author\"\r\n            {...newBlog.author.input}\r\n          >\r\n          </input>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"url\">url:</label>\r\n          <input\r\n            id=\"url\"\r\n            name=\"url\"\r\n            {...newBlog.url.input}\r\n          >\r\n          </input>\r\n        </div>\r\n        <div>\r\n          <button>create</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BlogForm","import React from 'react'\r\n\r\nconst NewBlog = (props) => {\r\n  const { showBlogForm, handleOnClick } = props\r\n  return (\r\n    <div>\r\n      {(!showBlogForm) ? (\r\n        <div>\r\n          <button onClick={handleOnClick}>new note</button>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          {props.children}\r\n          <button onClick={handleOnClick}>cancel</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NewBlog","import React from 'react'\r\nimport '../css/Notification.css'\r\n\r\nconst Notification = ({ message }) => {\r\n  if ( message.text.length === 0 ) {\r\n    return (\r\n      <div></div>\r\n    )\r\n  }\r\n\r\n  let className = 'noti'\r\n  className =\r\n    message.type === 'info'\r\n      ? className.concat(' noti-info')\r\n      : className.concat(' noti-error')\r\n\r\n  return (\r\n    <div className={className}>\r\n      <p>{message.text}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification","let token = null\r\n\r\nconst setToken = (newToken) => {\r\n  token = `Bearer ${newToken}`\r\n}\r\n\r\nconst getToken = () => token\r\n\r\nexport default { setToken, getToken }\r\n","import { useState } from 'react'\r\nimport axios from 'axios'\r\nimport token from '../services/token'\r\n\r\nconst useField = (type) => {\r\n  const [value, setValue] = useState('')\r\n\r\n  const onChange = (event) => {\r\n    setValue(event.target.value)\r\n  }\r\n\r\n  const reset = (init) => {\r\n    !init ? setValue('') : setValue(init)\r\n  }\r\n\r\n  return {\r\n    input: {\r\n      type,\r\n      value,\r\n      onChange,\r\n    },\r\n    reset\r\n  }\r\n}\r\n\r\nconst useResource = (baseUrl) => {\r\n  const [list, setList] = useState([])\r\n\r\n  const getAll = () => {\r\n    axios\r\n      .get(baseUrl, { headers: { 'Authorization': token.getToken() } })\r\n      .then(response => setList(response.data))\r\n  }\r\n  \r\n  const create = (newObject) => {\r\n    axios\r\n      .post(baseUrl, newObject, { headers: { 'Authorization': token.getToken() } })\r\n      .then(response => setList(list.concat(response.data)))\r\n  }\r\n  \r\n  const update = (id, newObject) => {\r\n    axios\r\n      .put(`${baseUrl}/${id}`, newObject, { headers: { 'Authorization': token.getToken() } })\r\n      .then(response => \r\n        setList(list\r\n          .filter((e) => e.id !== response.data.id)\r\n          .concat(response.data)))\r\n  }\r\n  \r\n  const remove = (id) => {\r\n    axios\r\n      .delete(`${baseUrl}/${id}`, { headers: { 'Authorization': token.getToken() } })\r\n      .then(() => \r\n        setList(list\r\n          .filter((value) => value.id !== id)))\r\n  }\r\n\r\n  return [list,\r\n    { getAll,\r\n      create,\r\n      update,\r\n      remove\r\n    }]\r\n}\r\n  \r\nexport { useField, useResource }\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = (user) => {\r\n  const request = axios.post(baseUrl, user)\r\n  return request\r\n    .then((response) => {\r\n      return response.data\r\n    })\r\n}\r\n\r\nexport default { login }","import React, { useState, useEffect } from 'react'\r\nimport LoginForm from './components/LoginForm'\r\nimport Blog from './components/Blog'\r\nimport BlogForm from './components/BlogForm'\r\nimport NewBlog from './components/NewBlog'\r\nimport Notification from './components/Notification' \r\nimport { useResource } from './hooks/index'\r\n//import { blogs, blogService } from './services/blogs'\r\nimport loginService from './services/login'\r\nimport token from './services/token'\r\nimport { useField } from './hooks'\r\n\r\nconst BlogList = ({ blogs, blogService, currUser, setMessage }) => {\r\n  return (\r\n    blogs\r\n      .concat()\r\n      .sort((a, b) => b.likes - a.likes)\r\n      .map((blog) =>\r\n        <Blog\r\n          key={blog.id}\r\n          blog={blog}\r\n          blogService={blogService}\r\n          currUser={currUser}\r\n          setMessage={setMessage}\r\n        />\r\n      )\r\n  )\r\n}\r\n\r\nconst LoggedInfo = ({ loggedUser, handleLogout }) => {\r\n  return (\r\n    <div>\r\n      <p>{loggedUser.username} logged in\r\n        <button onClick={handleLogout}>logout</button>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction App() {\r\n  const username = useField('text')\r\n  const password = useField('password')\r\n\r\n  const [blogs, blogService] = useResource('/api/blogs')\r\n  //const [blogs, setBlogs] = useState([])\r\n  const [user, setUser] = useState()\r\n  const [showBlogForm, setShowBlogForm] = useState(false)\r\n\r\n  const initMessage = {\r\n    type: '',\r\n    text: '',\r\n  }\r\n  const [message, setMessage] = useState(initMessage)\r\n\r\n  const newBlog = {\r\n    title: useField('text'),\r\n    author: useField('text'),\r\n    url: useField('url'),\r\n    reset() {\r\n      this.title.reset()\r\n      this.author.reset()\r\n      this.url.reset()\r\n    }\r\n  }\r\n\r\n  //const [newBlog, setNewBlog] = useState(initBlog)\r\n\r\n  useEffect(() => { \r\n    checkToken()\r\n  }, [])\r\n\r\n  const checkToken = () => {\r\n    const loggedUserJSON = window.localStorage.getItem('myBlogToken')\r\n    if (!loggedUserJSON) {\r\n      return\r\n    }\r\n    const parsedUser = JSON.parse(loggedUserJSON)\r\n    token.setToken(parsedUser.token)\r\n    blogService\r\n      .getAll()\r\n    //  .then((blogs) => {\r\n     //   setBlogs(blogs)\r\n      //})\r\n    setUser(parsedUser)\r\n  }\r\n\r\n  const handleLogin = (event) => {\r\n    event.preventDefault()\r\n    setMessage(initMessage)\r\n    loginService\r\n      .login({ username: username.input.value, password: password.input.value })\r\n      .then((loginUser) => {\r\n        token.setToken(loginUser.token)\r\n        return loginUser\r\n      })\r\n      .then((loginUser => {\r\n        setUser(loginUser)\r\n        return loginUser\r\n      }))\r\n      .then((loginUser) => {\r\n        blogService\r\n          //.getUserBlogs(loginUser.id)\r\n          .getAll()\r\n          //.then((blogs) => {\r\n           // setBlogs(blogs)\r\n          //})\r\n        return loginUser\r\n      })\r\n      .then((loginUser) => {\r\n        window.localStorage.setItem('myBlogToken', JSON.stringify(loginUser))\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n        setMessage({ type: 'error', text: 'wrong username or password' })\r\n        setUser('')\r\n        username.reset()\r\n        password.reset()\r\n      })\r\n  }\r\n\r\n  const handleLogout = () => {\r\n    window.localStorage.removeItem('myBlogToken')\r\n    setUser('')\r\n    username.reset()\r\n    password.reset()\r\n    setShowBlogForm(false)\r\n    setMessage(initMessage)\r\n  }\r\n\r\n  const handleCreateNewBlog = (event) => {\r\n    event.preventDefault()\r\n    const savingBlog = { \r\n        title: newBlog.title.input.value,\r\n        author: newBlog.author.input.value,\r\n        url: newBlog.url.input.value\r\n      }\r\n    blogService\r\n      .create(savingBlog)\r\n     // .then((savedBlog) => {\r\n      //  setBlogs(blogs.concat(savedBlog))\r\n      //})\r\n    setMessage({ type: 'info', text: `a new blog ${savingBlog.title} by ${savingBlog.author} added` })\r\n    newBlog.reset()\r\n  }\r\n\r\n  const toggleBlogForm = () => {\r\n    setShowBlogForm(!showBlogForm)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {!user ? (\r\n        <div>\r\n          <h1>log in to application</h1>\r\n          <Notification\r\n            message={message}\r\n          />\r\n          <LoginForm\r\n            username={username.input}\r\n            password={password.input}\r\n            handleLogin={handleLogin}\r\n            message={message}\r\n          />\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          <h1>Blogs</h1>\r\n          <Notification\r\n            message={message}\r\n          />\r\n          <LoggedInfo\r\n            loggedUser={user}\r\n            handleLogout={handleLogout}\r\n          />\r\n          <NewBlog showBlogForm={showBlogForm} handleOnClick={toggleBlogForm}>\r\n            <BlogForm\r\n              newBlog={newBlog}\r\n              handleCreateNewBlog={handleCreateNewBlog}\r\n            />\r\n          </NewBlog>\r\n          <BlogList\r\n            blogs={blogs}\r\n          //.  setBlogs={setBlogs}\r\n            blogService={blogService}\r\n            currUser={user}\r\n            setMessage={setMessage}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}